\chapter{实变函数}







\section{集合}\index{Set}






\begin{example}
\hfill\\
非空完备集一定是不可数集。


设$E$是完备集，若$E=\{x_n\}$可数，$\forall B_0=B(y_0,r_0)$，$y_0\in E$，$r_0=1$，$\exists y_1\in E$，$0<r_1\leq\frac{1}{2}$，使$B_1=B(y_1,r)\subset B_0$，且$x_1\not\in\overline{B_1}$。对$B(y_1,r_1)$，$\exists y_2\in E$，$0<r_2\leq\frac{1}{2^2}$，使$B_2=B(y_2,r_2)\subset B_1$，且$x_2\not\in\overline{B_2}$。以此类推，$\exists y_n\in E$，$0<r_n\leq\frac{1}{2^n}$，使$B_n=B(y_n,r_n)\subset B_{n-1}$，且$x_n\not\in\overline{B_n}$。因为$B_0\supset B_1\supset\cdots\supset B_n\cdots$，且$r_n\leq\frac{1}{2^n}$。所以$\{y_n\}$是基本列，$y_n\to y_0$。因为$\{y_n\}\subset E$，且$y_0\in\overline{B_n}$。因为$x_n\not\in\overline{B_n}$，所以$y_0\neq x_n,\forall n\geq1.$与$y_0\in E$矛盾。
\end{example}




\begin{exercise}
\hfill\\
证明：$R^n$中存在可列个开球$\{B_n\}_{n\geq1}$使得对任意开球$E$，存在子列$\{B_{n_k}\}$使得$E=\cup_{k\geq1}B_{n_k}$。满足这种条件的开球列$\{B_n\}_{n\geq1}$称为$R^n$中的一个可数邻域基。



\end{exercise}



\begin{exercise}
\hfill\\
设$E\subset R^n$。$\{G_{\alpha}\}_{\alpha\in\Lambda}$是$E$的一个开集族覆盖。证明：存在至多可数个开集$\{G_{\alpha_k}\}_{k\geq1}\subset\{G_{\alpha}\}_{\alpha\in\Lambda}$使得它仍覆盖$E$，即$E$的任意开覆盖有至多可数的子覆盖。
\end{exercise}

\section{Measure}

A \textbf{measure space} consists of a set $X$ equipped with two fundamental objects:
\begin{enumerate}
  \item A $\sigma$-algebra $\mathcal M$ of ``measurable'' sets, which is a non-empty collection of 
  subsets of $X$ closed under complements and countable unions and intersections.
  \item A \textbf{measure} $\mu:\mathcal M\to[0,\infty]$ with the following defining property:
  if $E_1$, $E_2$, $\cdots$ is a countable family of disjoint sets in $\mathcal M$, then 
  \[
  \mu\left(\cup_{n=1}^\infty E_n\right) = \sum_{n=1}^\infty\mu(E_n).
  \]
\end{enumerate}
A measure space is therefore often denoted by the triple $(X,\mathcal M,\mu)$ to emphasize its three main components.
Sometimes, however, when there is no ambiguity we will abbreviate this notation by referring to the measure space as $(X,\mu)$, or simply $X$.

A feature that a measure space often enjoys is the property of being $\sigma$-finite.
This means that $X$ can be written as the union of countably many measurable sets of finite measure.

\begin{definition}
  Let $X$ be a set. 
  An \textbf{exterior measure} (or \textbf{outer measure}) $\mu_\ast$ on $X$ is a function $\mu_*$ 
  from the collection of all subsets of $X$ to $[0,\infty]$ that satisfies the following properties:
  \begin{enumerate}
    \item $\mu_\ast(\emptyset) = 0$.
    \item If $E_1\subset E_2$, then $\mu_\ast(E_1) \leq \mu_*(E_2)$.
    \item If $E_1$, $E_2$, $\cdots$ is a countable family of sets, then 
    \[
      \mu_*\left(\cup_{n=1}^\infty E_n\right) = \sum_{n=1}^\infty\mu_\ast(E_n).
    \]
  \end{enumerate}
\end{definition}

\begin{definition}
  A set $E$ in $X$ is \textbf{Carath\'eodory measurable} or simply \textbf{measurable} if one has 
  \begin{equation}
    \label{eq: def of being Caratheodory measurable}
  \mu_*(A) = \mu_*(E\cap A) + \mu_*(E^c\cap A)\quad \text{for every }A\subset X.
  \end{equation}
\end{definition}

A first observation we make is that to prove a set $E$ is measurable, it suffices to verify 
\[
  \mu_*(A) \geq \mu_*(E\cap A) + \mu_*(E^c\cap A)\quad \text{for all }A\subset X,
\]
since the reverse inequality is automatically verified by the sub-additivity property of the exterior measure.
We see immediately from the definition that sets of exterior measure zero are necessarily measurable.

\begin{theorem}
  Given an exterior measure $\mu_*$ on a set $X$, the collection $\mathcal M$ of Carath\'eodory measurable sets forms a $\sigma$-algebra. 
  Moreover, $\mu_*$ restricted to $\mathcal M$ is a measure.
\end{theorem}

Our previous observation that sets of exterior measure $0$ are Carath\'eodory measurable shows that
the measure space $(X,\mathcal M,\mu)$ in the theorem is \textbf{complete}: 
whenever $F\in\mathcal M$ satisfies $\mu(F) = 0$ and $E\subset F$, then $E\in\mathcal M$.

\subsection{Metric exterior measures}

If the underlying set $X$ is endowed with a ``distance function'' or ``metric'',
there is a particular class of exterior measures that is of interest in practice. 
The importance of these exterior measures is that they induce measures on the natural $\sigma$-algebra 
generated by the open sets in $X$.

On a metric space $X$ we can define the \textbf{Borel $\sigma$-algebra}, $\mathcal B_X$, 
that is the smallest $\sigma$-algebra of sets in $X$ that contains the open sets of $X$. 
In other words $\mathcal B_X$ is the intersection of all $\sigma$-algebras that contain the open sets.
Elements in $\mathcal B_X$ are called \textbf{Borel sets}.

Given two sets $A$ and $B$ in the metric space $(X, d)$, 
the \textbf{distance} between $A$ and $B$ is defined by 
\[
d(A,B) := \inf\{d(x,y) : x\in A \text{ and } y\in B\}.
\]
Then an exterior measure $\mu_*$ on $X$ is a \textbf{metric exterior measure} if it satisfies 
\[
\mu_*(A\cup B) = \mu_*(A) + \mu_*(B)\quad \text{whenever } d(A,B)>0.
\]
This property played a key role in the case of exterior Lebesgue measure.

Metric exterior measures is these exterior measures with the special property of being additive on sets that are ``well separated'', 
which guarantees that this exterior measure defines a measure on the Borel $\sigma$-algebra.
This is achieved by proving that all Borel sets are Carath\'eodory measurable.

\begin{theorem}
  If $\mu_*$ is a metric exterior measure on a metric space $X$, 
  then the Borel sets in $X$ are measurable.
  Hence $\mu_*$ restricted to $\mathcal B_X$ is a measure.
\end{theorem}

Given a metric space $X$, a measure $\mu$ defined on the Borel sets of $X$ will be referred to as a \textbf{Borel measure}.
Borel measures that assign a finite measure to all balls (of finite radius) also satisfy a useful regularity property. 
The requirement that $\mu(B) < \infty$ for all balls $B$ is satisfied in many (but not in all) circumstances that arise in practice.
\footnote{This restriction is not always valid for the Hausdorff measures that are considered in the next chapter.}
When it does hold, we get the following proposition.

\begin{proposition}
  Suppose the Borel measure $\mu$ is finite on all balls in $X$ of finite radius. 
  Then for any Borel set $E$ and any $varepsilon>0$, 
  there are an open set $\mathcal O$ and a closed set $F$ such that $E\subset\mathcal O$ and 
  $\mu(\mathcal O-E) < \varepsilon$, while $F\subset E$ and $\mu(E-F) < \varepsilon$.
\end{proposition}

\subsection{The extension theorem}

As we have seen, a class of measurable sets on $X$ can be constructed once we start with a given exterior measure.
However, the definition of an exterior measure usually depends on a more primitive idea of measure defined on a simper class of sets.
This is the role of a premeasure defined below.
As we will show, any premeasure can be extended to a measure on $X$. 
We begin with several definitions.

Let $X$ be a set. An \textbf{algebra} in $X$ is a non-empty collection of subsets of $X$ that is closed under complements, finite unions, and finite intersections.
Let $\mathcal A$ be an algebra in $X$. 
A \textbf{premeasure} on an algebra $\mathcal A$ is a function $\mu_0:\mathcal A\to[0,\infty]$ that satisfies:
\begin{enumerate}
  \item $\mu_0(\emptyset) = 0$.
  \item If $E_1$, $E_2$, $\cdots$ is a countable collection of disjoint sets in $\mathcal A$ with 
  $\cup_{k=1}^\infty E_k \subset\mathcal A$, then 
  \[
  \mu_0\left(\cup_{k=1}^\infty E_k\right) = \sum_{k=1}^\infty \mu_0(E_k).
  \]
\end{enumerate}

Premeasures give rise to exterior measures in a natural way.

\begin{lemma}
  If $\mu_0$ is a premeasure on an algebra $\mathcal A$, define $\mu_*$ on any subset $E$ of $X$ by 
  \[
  \mu_*(E) = \inf\left\{\sum_{j=1}^\infty \mu_0(E_j): E\subset\cup_{j=1}^\infty E_j, E_j\in\mathcal A \right\}.
  \]
  Then, $\mu_*$ is an exterior measure on $X$ that satisfies:
  \begin{enumerate}
    \item $\mu_*(E) = \mu_0(E)$ for all $E\in\mathcal A$.
    \item All sets in $\mathcal A$ are measurable in the sense of \eqref{eq: def of being Caratheodory measurable}.
  \end{enumerate}
\end{lemma}

The $\sigma$-algebra generated by an algebra $\mathcal A$ is by definition the smallest $\sigma$-algebra that contains $\mathcal A$.
The above lemma then provides the necessary step for extending $\mu_0$ on $\mathcal A$ to a measure on the $\sigma$-algebra generated by $\mathcal A$.

\begin{theorem}
  Suppose that $\mathcal A$ is an algebra of sets in $X$, 
  $\mu_0$ a premeasure on $\mathcal A$, 
  and $\mathcal M$ the $\sigma$-algebra generated by $\mathcal A$.
  Then there exists a measure $\mu$ on $\mathcal M$ that extends $\mu_0$.
  \footnote{One notes below that $\mu$ is the only such extension of $\mu_0$ under the assumption that $\mu$ is $\sigma$-finite.}
\end{theorem}

For later use we record the following observation about the premeasure $\mu_0$ on the algebra $\mathcal A$ 
and the resulting measure $\mu_*$ that is implicit in the argument given above. 
The details of the proof may be left to the reader.

We define $\mathcal A_\sigma$ as the collection of sets that are countable unions of sets in $\mathcal A$,
and $\mathcal A_{\sigma\delta}$ as the sets that arise as countable intersections of sets in $\mathcal A_\sigma$.

\begin{proposition}
  For any set $E$ and any $\varepsilon>0$, there are sets $E_1\in\mathcal A_\sigma$ and $E_2\in\mathcal A_{\sigma\delta}$,
  such that $E\subset E_1$, $E\subset E_2$, and $\mu_*(E_1)\leq \mu_*(E) + \varepsilon$,
  while $\mu_*(E_2) = \mu_*(E)$.
\end{proposition}

\subsection{Hausdorff measure}

\begin{definition}
  For any subset $E$ of $\mathbb R^n$, 
  define the \textbf{exterior $\alpha$-dimensional Hausdorff measure} of $E$ by 
  \[
  m^*_\alpha(E) = \lim_{\delta\to0}\inf\left\{\sum_k(\diam F_k)^\alpha : E\subset\cup_{k=1}^\infty F_k,
  \quad \diam F_k \leq \delta \text{ all } k\right\},
  \]
  where $\diam S$ denotes the diameter of the set $S$, that is, 
  \[
  \diam S := \sup\{|x-y|: x,y\in S\}.
  \]
\end{definition}

\begin{remark}
  The quantity 
  \[
  \mathcal{H}_\alpha^\delta(E) :=  \inf\left\{\sum_k(\diam F_k)^\alpha : E\subset\cup_{k=1}^\infty F_k,
  \quad \diam F_k \leq \delta \text{ all } k\right\}
  \]
  is increasing as $\delta$ decreases, so that the limit 
  \[
  m_\alpha^*(E) = \lim_{\delta\to0}\mathcal H_\alpha^\delta(E)
  \]
  exists,
  although $m_\alpha^*(E)$ could be infinite.
\end{remark}

The Cantor set $\mathcal C$ was constructed by successively removing the middle-third intervals in $[0,1]$.

\section{Integration on measure space}

To avoid unnecessary complications will assume throughout that the measure space $(X,\mathcal M,\mu)$ under consideration is $\sigma$-finite.

\subsection{Measurable functions}

\begin{definition}
  A function $f$ on $X$ with values in the extended real numbers is \textbf{measurable} if 
  \[
  f^{-1}([-\infty, a)) = \{x\in X: f(x) < a\}\in\mathcal{M}\quad \text{for all } a\in\mathbb R.
  \]
\end{definition}

\begin{remark}
  With this definition, the basic properties of measurable functions obtained in the case of $\mathbb R^d$
  with the Lebesgue measure continue to hold.
  For instance, the collection of measurable functions is closed under the basic algebraic manipulations.
  Also, the pointwise limits of measurable functions are measurable.
\end{remark}

The notation of ``almost everywhere'' that we use now is with respect to the measure $\mu$.
For instance, if $f$ and $g$ are measurable functions on $X$,
we write $f=g$ a.e. to say that 
\[
\mu(\{x\in X: f(x)\neq g(x)\}) = 0.
\]

A \textbf{simple function} on $X$ takes the form 
\[
\sum_{k=1}^N a_k\chi_{E_k},
\]
where $E_k$ are measurable sets of finite measure and $a_k$ are real numbers.
Approximations by simple functions played an important role in the definition of the Lebesgue integral.
Fortunately, this result continues to hold in our abstract setting.

\begin{theorem}
  Suppose $f$ is a non-negative measurable function on a measure space $(X,\mathcal M,\mu)$.
  Then there exists a sequence of simple functions $\{\phi_k\}^\infty_{k=1}$ that satisfies 
  \[
  \phi_k(x)\leq \phi_{k+1}(x) 
  \quad\text{and}\quad
  \lim_{k\to\infty}\phi_k(x) = f(x) \text{ for all }x.
  \]
  In general, if $f$ is only measurable, there exists a sequence of simple functions $\{\phi_k\}_{k=1}^\infty$ that satisfies 
  \[
  |\phi_k(x)| \leq |\phi_{k+1}(x)|
  \quad\text{and}\quad
  \lim_{k\to\infty}\phi_k(x) = f(x)\text{ for all }x.
  \]
\end{theorem}

Another important result that generalizes immediately is Egorov's theorem.

\begin{theorem}
  Suppose $\{f_k\}_{k=1}^\infty$ is a sequence of measurable functions defined on a measurable set $E\subset X$ with $\mu(E)<\infty$, and $f_k\to f$ a.e. 
  Then for each $\varepsilon > 0$ there is a set $A_\varepsilon$ with $A_\varepsilon\subset E$,
  $\mu(E-A_\varepsilon) \leq \varepsilon$, and such that $f_k\to f$ uniformly on $A_\varepsilon$.
\end{theorem}

The four-step approach to the construction of the Lebesgue integral that begins with its definition on simple functions carries over to the situation of a $\sigma$-finite measure space $(X,\mathcal M,\mu)$.
This leads to the notion of the integral, with respect to the measure $\mu$, 
of a non-negative measurable function $f$ on $X$. This integral is denoted by 
\[
\int_X f(x)\dd\mu(x),
\]
which we sometimes simplify as $\int_Xf\dd\mu$, $\int f\dd\mu$ or $\int f$, 
when no confusion is possible.
Finally, we say that a measurable function $f$ is \textbf{integrable} if 
\[
\int_X|f(x)|\dd\mu(x) < \infty.
\]
The elementary properties of the integral, such as linearity and monotonicity, 
continue to hold in this general setting, as well as the following basic limit theorems.
\begin{description}
  \item[Fatou's lemma.] If $\{f_n\}$ is a sequence of non-negative measurable functions on $X$, then 
  \[
  \int \liminf_{n\to\infty}f_n\dd\mu\leq\liminf_{n\to\infty}\int f_n\dd\mu.
  \]
  \item[Monotone convergence.] If $\{f_n\}$ is a sequence of non-negative measurable functions with $f_n\nearrow f$, then 
  \[
  \lim_{n\to\infty}\int f_n = \int f.
  \]
  \item[Dominated convergence.] If $\{f_n\}$ is a sequence of measurable functions with $f_n\to f$ a.e., 
  and such that $|f_n|\leq g$ for some integrable $g$, then 
  \[
  \int |f_n-f|\dd\mu\to0,\quad\text{as }n\to\infty,
  \]
  and consequently 
  \[
  \int f_n\dd\mu\to\int f\dd\mu,\quad\text{as }n\to\infty.
  \] 
\end{description}

\subsection{Product measures and Fubini theorem}

The construction of product measures leads to a general form of the theorem that express a multiple integral as a repeated integral.

Suppose $(X,\mathcal M, \mu)$ and $(Y,\mathcal N, \nu)$ are a pair of measure spaces.
We want to describe the \textbf{product measure} $\mu\times\nu$ on the space 
$Z = X\times Y = \{(x,y): x\in X, y\in Y\}$.
We will suppose here that the two measure spaces are each complete and $\sigma$-finite.

Let $\mathcal A$ denote the collection of all sets in $Z$ that are finite unions of disjoint measurable rectangles $A\times B$, with $A\in\mathcal M$ and $B\in\mathcal N$.
It is easy to check that $\mathcal A$ is an algebra of subsets of $X$.
From now on we abbreviate our terminology by referring to measurable rectangles simply as ``rectangles''.

On the rectangles we define the function $\mu_0$ by $\mu_0(A\times B) = \mu(A)\nu(B)$.
Since $\mu_0$ becomes a premeasure, $\mu_0$ has a unique extension to the algebra $\mathcal A$,
which we denote by $\gamma=\mu\times\nu$ on the $\sigma$-algebra $\mathcal O$ of sets generated by the algebra $\mathcal A$ of measurable rectangles.
In this way, we have defined the product measure space $(Z,\mathcal O,\mu) = (X\times Y,\mathcal O,\mu\times\nu)$.

\begin{theorem}
  In the setting above, suppose $f(x,y)$ is an integrable function on $(X\times Y,\mu\times\nu)$.
  \begin{enumerate}
    \item For almost every $x\in X$, the slice $f^y(x) = f(x,y)$ is integrable on $(X,\mu)$.
    \item $\int_Xf(x,y)\dd\mu$ is an integrable function on $Y$.
    \item $\int_Y\left(\int_Xf(x,y)\dd\mu\right)\dd\nu = \int_{X\times Y}f\dd\mu\times\nu$.
  \end{enumerate}
\end{theorem}

\subsection{Borel measures on $\mathbb R$ and the Lebesgue-Stieltjes integral}

\begin{theorem}
  Let $F$ be an increasing function on $\mathbb R$ that is normalized.
  \footnote{We say a function is normalized, if it is right-continuous.}
  Then there is a unique measure $\mu$ (also denoted by $\dd F$) on the Borel sets $\mathcal B$ on $\mathbb R$
  such that $\mu((a,b]) = F(b) - F(a)$ if $a<b$.
  Conversely, if $\mu$ is a measure on $\mathcal B$ that is finite on bounded intervals,
  then $F$ defined by $F(x) = \mu((0,x])$, $x>0$, $F(0) = 0$ and $F(x) = -\mu((-x,0])$, $x<0$, 
  is increasing and normalized.
\end{theorem}

\subsection{Absolute continuity of measures}

The generalization of the notion of absolute continuity requires that we extend the ideas of a measure to encompass set functions that may be positive or negative. 
We describe this notion first.

\subsubsection{Signed measures}

Loosely speaking, a signed measure possesses all the properties of a measure, 
except that it may take positive or negative values. 
More precisely, 
a \textbf{signed measure} $\nu$ on a $\sigma$-algebra $\mathcal M$ is a mapping that satisfies:
\begin{enumerate}
  \item The set function $\nu$ is extended-valued in the sense that $-\infty<\nu(E)\leq\infty$ for all $E\in\mathcal M$.
  \item If $\{E_j\}_{j=1}^\infty$ are disjoint subsets of $\mathcal M$, then 
  \[
  \nu\left(\cup_{j=1}^\infty E_j\right) = \sum_{j=1}^\infty\nu(E_j).
  \]
\end{enumerate}

Note that for this to hold the sum $\sum\nu(E_j)$ must be independent of the rearrangements of terms,
so that if $\nu(\cup_{j=1}^\infty E_j)$ is finite, 
it implies that the sum converges absolutely.

Given a signed measure $\nu$ on $(X,\mathcal M)$ it is always possible to find a 
(positive) measure $\mu$ that dominates $\nu$, in the sense that 
\[
\nu(E)\leq\mu(E)\quad \text{for all } E,
\]
and that in addition is the ``smallest'' $\mu$ that has this property.

The construction is in effect an abstract version of the decomposition of a function of bounded variation 
as the difference of two increasing functions. 
We proceed as follows.
We define a function $|\nu|$ on $\mathcal M$, called the \textbf{total variation} of $\nu$, by 
\[
|\nu|(E) := \sup\sum_{j=1}^\infty|\nu(E_j)|,
\]
where the supremum is taken over all partitions of $E$, 
that is, over all countable unions $E=\cup_{j=1}^\infty E_j$, 
where the sets $E_j$ are disjoint and belong to $\mathcal M$.

The fact that $|\nu|$ is actually additive is not obvious, and is given in the proof below.

\begin{proposition}
  The total variation $|\nu|$ of a signed measure $\nu$ is itself a (positive) measure that satisfies $\nu\leq|\nu|$.
\end{proposition}

It is now possible to write $\nu$ as the difference of two (positive) measures.
To see this, we define the \textbf{positive variation} and \textbf{positive variation} of $\nu$ by 
\[
\nu^+ = \frac12(|\nu|+\nu)
\quad\text{and}\quad
\nu^- = \frac12(|\nu|-\nu).
\]
By the proposition we see that $\nu^+$ and $\nu^-$ are measures, and they clearly satisfy 
\[
\nu = \nu^+ - \nu^-
\quad\text{and}\quad
|\nu| = \nu^+ + \nu^-.
\]
In the above if $\nu(E) = \infty$ for a set $E$, then $|\nu|(E) = \infty$, and $\nu^-(E)$ is defined to be zero.

We also make the following definition: we say that the signed measure $\nu$ is \textbf{$\sigma$-finite} if the measure $|\nu|$ is $\sigma$-finite.

\subsubsection{Absolute continuity}

Here we adopt the terminology that the measure $\nu$ is \textbf{supported} on a set $A$,
if $\nu(E) = \nu(E\cap A)$ for all $E\in\mathcal M$.

Two signed measures $\nu$ and $\mu$ on $(X,\mathcal M)$ are \textbf{mutually singular} if there are disjoint subsets $A$ and $B$ in $\mathcal M$ so that 
\[
\nu(E) = \nu(A\cap E)
\quad\text{and}\quad
\nu(E)=\mu(B\cap E)
\quad\text{for all } 
E\in\mathcal M.
\]
Thus, $\nu$ and $\mu$ are supported on disjoint subsets.
We use the symbol $\nu\bot \mu$ to denote the fact that the measures are mutually singular.

In contrast, if $\nu$ is \textbf{absolutely continuous} with respect to $\mu$ if 
\[
\nu(E) = 0\quad \text{whenever }E\in\mathcal M \text{ and }\mu(E) = 0.
\]
Thus, if $\nu$ is supported in a set $A$, then $A$ must be an essential part of the support of $\mu$ in the sense that $\mu(A)>0$.
We use the symbol $\nu\ll \mu$ to indicate that $\nu$ is absolutely continuous with respect to $\mu$.
Note that if $\nu$ and $\mu$ are mutually singular, and $\nu$ is also absolutely continuous with respect to $\mu$, then $\nu$ vanishes identically.

\begin{proposition}
  The assertion 
  ``For each $\varepsilon>0$, there is a $\delta>0$ such that $\mu(E)<\delta$ implies $|\nu(E)|<\varepsilon$.''
  implies $\nu\ll\mu$.
  Conversely, if $|\nu|$ is a finite measure, then $\nu\ll\mu$ implies this assertion.
\end{proposition}


\subsection{Lebesgue decomposition theorem}

It was proven in the case of $\mathbb R$ by Lebesgue, and in the general case by Radon and Nikodym.

\begin{theorem}
  Suppose $\mu$ is a $\sigma$-finite positive measure on the measure space $(X,\mathcal M)$ and 
  $\nu$ a $\sigma$-finite signed measure on $\mathcal M$.
  Then there exist unique signed measures $\nu_a$ and $\nu_s$ on $\mathcal M$ such that 
  $\nu_a\ll\mu$, $\nu_s\bot\mu$ and $\nu=\nu_a+\nu_s$.
  In addition, the measure $\nu_a$ takes the form $\dd\nu_a=f\dd\mu$; that is,
  \[
  \nu_a(E) = \int_Ef(x)\dd\mu(x)
  \]
  for some extended $\mu$-integrable function $f$.
\end{theorem}

Throughout this subsection we shall assume that $X$ is the real line, 
$S$ is the class of all Borel sets,
and $\mu$ is Lebesgue measure on $S$.

If $(X, S)$ is a measurable space and $\mu$ and $v$ are signed measures on $S$, 
we say that $v$ is absolutely continuous with respect to $\mu$,
in symbols $v \ll \mu$, if $v(E) = 0$ for every measurable set $E$ for which $|\mu|(E) = 0$.
We say that $\mu$ and $v$ are singular, in symbols $\mu \bot v$,
if there exist two disjoint sets $A$ and $B$ whose union is $X$ such that,
for every measurable set $E$, $A\cap E$ and $B\cap E$ are measurable and 
$|\mu|(A\cap E) = |v|(B\cap E) = 0$.


\begin{theorem}
  \label{thm: Lebesgue decomposition theorem}
  If $v$ is a finite measure on $S$, 
  then there exist three uniquely determined $v_1$, $v_2$ and $v_3$ on $S$
  whose sum is $v$ and which are such that $v_1$ is absolutely continuous with respect to $\mu$, 
  $v_2$ is purely atomic, 
  and $v_3$ is singular with respect to $\mu$ but $v_3(\{x\}) = 0$ for every point $x$.
  Here, we shall say that a finite measure $v$ on $S$ is \textbf{purely atomic} 
  if there exists a countable set $C$ such that $v(X-C) = 0$.
\end{theorem}

\begin{proof}
  According to the Lebesgue decomposition theorem there exist two measures $v_0$ and $v_1$ on $S$ 
  whose sum is $v$ and which are such that $v_0$ is singular 
  and $v_1$ is absolutely continuous with respect to $\mu$.
  Let $C$ be the set of those points $x$ for which $v_0(\{x\}) \neq 0$; the finiteness of $v$ implies that 
  $C$ is countable. If we write 
  \[
  v_2(E) = v_0(E\cap C) \quad \text{and}\quad v_3(E) = v_0(E-C),
  \]
  then it is clear that the decomposition $v = v_1 + v_2 + v_3$ has all the desired properties.
  Uniqueness follows from the uniqueness of the Lebesgue decomposition 
  and the easily verifiable uniqueness of $C$.
\end{proof}

\begin{example}
  Let $f\in L^1(\mathbb R)$ be a non negative function. 
  Define 
  \[
  \nu(E) := \int_Ef\dd x.
  \]
  Then $\nu_1(E) = \nu(E)$, $\nu_2(E) = 0$ and $\nu_3(E) = 0$.

  Let $r_1, r_2, \cdots$ be an enumeration of the set $R$ of all rational numbers. 
  Assign $v(\{r_i\}) = 2^{-i}$ and $v(\{p\}) = 0$ for any irrational number $p\in I$.
  Then $v(X) = 1$, $v_1(E) = 0$, $v_2(E) = v(I\cap E)$ and $v_3(E) = 0$.

  Let $C$ be the Cantor set and $H^{\alpha}$ be the Hausdorff measure with $\alpha=\ln 2/\ln3$.
  Define 
  \[
  v(E) := \int_E H(E\cap C)\dd H^\alpha.
  \]
  Then $v(X) = H^\alpha(C)$, $v_1(E) = 0$, $v_2(E) = 0$ and $v_3(E) = v(E\cap C)$.
\end{example}

\begin{example}
  \label{eg: Lebesgue decomposition of increasing function}
  Suppose $F$ is an increasing function on $[a,b]$.
  \begin{enumerate}
    \item Prove that we can write 
    \[
    F = F_A + F_C + F_J,
    \]
    where each of the function $F_A$, $F_C$ and $F_J$ is increasing and:
    \begin{enumerate}
      \item $F_A$ is absolutely continuous.
      \item $F_C$ is continuous, but $F'_C(x) = 0$ for a.e. $x$.
      \item $F_J$ is a jump function.
    \end{enumerate}
    \item Moreover, each component $F_A$, $F_C$, $F_J$ is uniquely determined up to an additive constant.
  \end{enumerate}
  The above is the \textbf{Lebesgue decomposition} of $F$. There is a corresponding decomposition for any $F$ of bounded variation.
\end{example}

\begin{proof}
  Since $F$ is an increasing function, $F'$ exists for a.e. $x \in [a, b]$.
  Let 
  \[
  F_A(x) = \int_a^xF'(s)\dd s.
  \]
  Then $F_A(x) \leq F(b) - F(a)$ is absolutely continuous.
  Since $F$ has at most countably many discontinuities, 
  let $\{x_1, x_2,\cdots\}\subset[a,b]$ denote the points where $F$ is discontinuous,
  and let $\alpha_n$ denote the jump of $F$ at $x_n$,
  that is $\alpha_n = F(x_n+) - F(x_n-)$,
  then  
  \[
  F(x_n) = F(x_n-) + \theta_n\alpha_n,
  \]
  for some $\theta_n\in[0,1]$,
  with the understanding $F(b+) = F(b)$ and $F(a-) = F(a)$.
  If we let 
  \begin{align*}
    j_n(x) = 
    \begin{cases}
      0, & x<x_n,\\
      \theta_n, & x=x_n,\\
      1, & x>x_n,
    \end{cases}
  \end{align*}
  then we define the \textbf{jump function} associated to $F$ by 
  \[
  F_J(x) := \sum_{n=1}^\infty \alpha_n j_n(x).
  \]
  Finally, we define 
  \[
  F_C = F - F_A - F_J.
  \]
  It is clear that $F_C$ is continuous, as desired.
\end{proof}

\begin{example}
  Suppose that $F$ is an increasing normalized function on $\mathbb R$,
  that is, $F$ is right-continuous at every point,
  and let $F = F_A + F_B + F_J$ be the decomposition of $F$ in Example~\ref*{eg: Lebesgue decomposition of increasing function};
  here $F_A$ is absolutely continuous, $F_C$ is continuous with $F'_C = 0$ a.e, and $F_J$ is a pure jump function.
  Let $\mu = \mu_A + \mu_C + \mu_J$ with $\mu$, $\mu_A$, $\mu_C$ and $\mu_J$ the Borel measures associated to $F$, $F_A$, $F_C$ and $F_J$, respectively.
  Verify that:
  \begin{enumerate}
    \item $\mu_A$ is absolutely continuous with respect to Lebesgue measure and $\mu_A(E) = \int_EF'(x)\dd x$ for every Lebesgue measurable set $E$.
    \item As a result, if $F$ is absolutely continuous, then $\int f\dd\mu = \int f\dd F = \int f(x)F'(x)\dd x$ whenever $f$ and $fF'$ are integrable.
    \item $\mu_C + \mu_J$ and Lebesgue measure are mutually singular.
  \end{enumerate}
\end{example}


\subsection{Harmonic measure}

Green function $G(x,y)$ (Poisson kernel, Newtonian potential) solves 
\[
-\Delta_y G(x,y) = \delta_x(y), \quad x,y\in\mathbb R^n,
\]
in the distribution sense. 
So the singular function $K(x) = G(x,0)$, consistent with Liouville theorem,
has a unit harmonic capacity.

\begin{proposition}
  Let $n\geq3$. 
  Write
  \begin{align*}
    K(x) &= \int_0^\infty\frac{1}{(4\pi t)^{n/2}}e^{-\frac{|x|^2}{4t}}\dd t 
    = - \frac{1}{4\pi^{n/2}}\int_0^\infty\frac{1}{(4t)^{n/2-2}}e^{-\frac{|x|^2}{4t}}\dd\frac1{4t}\\
    &= \frac1{4\pi^{n/2}}\int_0^\infty s^{n/2-2}e^{-|x|^2s}\dd s
    = \frac{|x|^{2-n}}{4\pi^{n/2}}\int_0^\infty \xi^{n/2-2}e^{-\xi}\dd\xi \\
    &= \frac{\Gamma(n/2-1)|x|^{2-n}}{4\pi^{n/2}} = \frac{\Gamma(n/2)|x|^{2-n}}{2(n-2)\pi^{n/2}} =: c_n|x|^{2-n}.
  \end{align*}
  It can be seen that 
  \[
  K(x) \in W_{\loc}^{1,p}(\mathbb R^n)\cap C_{\loc}^\infty(\mathbb R^n\setminus \{0\}),
  \quad 1\leq p < n/(n-1),
  \]
  and 
  \[
  \nabla K\cdot x/|x| = c_n(2-n)|x|^{1-n},\quad \Delta K = 0, \quad x\in  \mathbb R^n\setminus\{0\}.
  \]
  It can be observed that for any $\phi\in C_0^\infty(\mathbb R^n)$,
  \[
  \Delta K*\phi (x) = -\delta_x(\phi).
  \]
\end{proposition}

\begin{proof}
  We calculate 
  \begin{align*}
    &\quad\Delta K*\phi(x)\\
    &= \int_{\mathbb R^n}K(x-y)\Delta\phi(y)\dd y & \text{distribution derivative}\\ 
    &= -\int_{\mathbb R^n}\nabla K(y)\nabla\phi(x-y)\dd y
    & \text{weak derivative}\\
    &= - \lim_{\varepsilon\searrow0}\int_{|y|>\varepsilon}\nabla K(y)\nabla \phi(x-y)\dd y
    & \text{Lebesgue dominated convergence theorem}\\
    &= \lim_{\varepsilon\searrow0}\int_{|y|=\varepsilon}\nabla K(y)\cdot y/|y|\phi(x-y)\dd y
    & \text{integration by parts}\\
    &= c_n(2-n)\omega_n\lim_{\varepsilon\searrow0}\fint_{|x-y|=\varepsilon}\phi(y)\dd y
    = -\phi(x).
    & \text{continuity}
  \end{align*}
\end{proof}

\begin{remark}
  Let 
  \begin{equation*}
    f(x) = 
    \begin{cases}
      -x/2, & x\leq 0,\\
      x/2, & x>0.
    \end{cases}
  \end{equation*}
  Then $f\in W_{\loc}^{1,\infty}(\mathbb R)$ and $f''(x) = \delta_0(x)$.
  Indeed,
  we observe that 
  \begin{align*}
    f''(\phi) = \int_{\mathbb R}  f\phi''\dd x 
    = \int_{\mathbb R^-}  \phi'/2\dd x - \int_{\mathbb R^+}\phi'/2\dd x 
    = \phi(0) = \int_{\mathbb R}\phi\dd\delta_0(x),
  \end{align*}
  holds for any $\phi(x)\in C^\infty_0(\mathbb R)$.
\end{remark}

\begin{remark}
Let 
  \begin{align*}
    N(x) = -\frac{1}{2\pi}\ln|x|,\quad x\in\mathbb R^2.
  \end{align*}
Then $N\in W^{1,q}_{\loc}(\mathbb R^2)$, $q\in[1,2)$ and $\Delta N = -\delta_0(x)$,
as desired.
\end{remark}

\begin{remark}
  Let 
  \[
  K^\varepsilon := 
  \begin{cases}
    c_n\varepsilon^{2-n}, & |x|\leq\varepsilon,\\
    K(x), & |x|>\varepsilon.
  \end{cases}
  \]
  Then following the proof above, we can see that 
  \[
  -\Delta K^\varepsilon(\phi) = \fint_{|x|=\varepsilon}\phi(x)\dd S,\quad \phi\in C_0^\infty(\mathbb R^n).
  \] 
  It is clear that for any $\varepsilon>0$,
  $-\Delta K^\varepsilon$ is mutually singular with respect to Lebesgue measure $\mu$.
  The singular set is exactly $S^\varepsilon := \{|x|=\varepsilon\}$.
  When $\varepsilon>0$, for each $x\in S^\varepsilon$, $-\Delta^\varepsilon(\{x\}) = 0$.
  While $\varepsilon = 0$, $-\Delta(\{0\}) = 1$. 
  See Theorem~\ref{thm: Lebesgue decomposition theorem} for more details.
\end{remark}

\begin{proposition}
  Let $n\geq2$. 
  Suppose $P\in W_{\loc}^{1,2}(\mathbb R^n)$.
  Put $S:= \spt(\Delta P)$.
  If $S\subset L$, 
  then $P$ is a distribution Laplacian with zero harmonic capacity,
  where
  \[
  L\cong \mathbb{R}^k,\quad k\in\{0,1,2,3,\cdots, n-2\},
  \]
  with the understanding $\mathbb R^0=\{0\}$.
\end{proposition}

\begin{proof}
  Without loss of generality, we may assume that 
  \[
  L\subset\{(0,0,x_3,x_4,\cdots,x_n)\} := \tilde L.
  \]
  Denote $\pi(x) = x_{1,2} = (x_1, x_2, 0,0,\cdots,0)$ as projection of $x$ to $\tilde L^\bot $.
  %Since $\Delta P = 0$ over $\mathbb R^n\setminus S$, 
  Fubuni theorem implies 
  \[
  b(s) := \int_{|x_{1,2}|=s}\int_{\pi^{-1}(x_{1,2})}|\nabla P|^2\dd H^{n-2}\dd S
  \]
  is well-defined.
  $P\in W^{1,2}_{\loc}(\mathbb R^n)$ implies that 
  \[
  B := \liminf_{s\searrow0}sb(s) = 0.
  \]
  Otherwise,
  \begin{align*}
    \int_{\mathbb R^n}|\nabla P|^2\dd x 
    &= \int_{\mathbb R^2}\int_{\pi^{-1}(x_{1,2})}|\nabla P|^2\dd H^{n-2}\dd H^2\\
    &= \int_{\mathbb R^+}b(s)\dd s = \infty,
  \end{align*}
  which is absurd.
  Using H\"older inequality, we obtain for any $\phi\in C_0^{\infty}(\mathbb R^n)$,
  \begin{align*}
    \int_{|x_{1,2}|=\varepsilon}
    \left(\int_{\mathbb R^{n-2}}|\nabla P||\phi|\dd H^{n-2}\right)\dd S
    \leq C(\phi)\sqrt{\varepsilon b(\varepsilon)}
  \end{align*}
  We estimate for any $\phi\in C_0^{\infty}(\mathbb R^n)$,
  \begin{align*}
    \Delta P(\phi) 
    &= \int_{\mathbb R^n}P\Delta\phi\dd x &\text{distribution derivative}\\
    &= -\int_{\mathbb R^n}\nabla P\nabla \phi\dd x &\text{weak derivative}\\
    &= -\int_{\mathbb R^{2}}\left(\int_{\mathbb R^{n-2}}\nabla P\nabla \phi\dd H^{n-2} \right)\dd H^2
    &\text{Fubini theorem}\\
    &= -\lim_{\varepsilon\searrow0}
    \int_{|x_{1,2}| > \varepsilon} \left(\int_{\mathbb R^{n-2}}\nabla P\nabla \phi\dd H^{n-2}\right)\dd H^2
    &\text{Lebesgue dominated convergence theorem}\\
    &\leq \liminf_{\varepsilon\searrow0}\int_{|x_{1,2}|=\varepsilon}
    \left(\int_{\mathbb R^{n-2}}|\nabla P||\phi|\dd H^{n-2}\right)\dd S = 0.
    &\text{integration by parts}
  \end{align*}
\end{proof}

\begin{lemma}
  Let $w\in W^{1,q}(\Omega)$, $q\in[1,n/(n-1))$ be the weak solution of 
  \begin{equation*}
    \begin{cases}
      -\Delta w = f, & \Omega,\\
      w = 0, &\partial\Omega,
    \end{cases}
  \end{equation*}
  in the sense that 
  \[
  \int_\Omega \nabla w\nabla \phi = \int_\Omega f\phi, \quad\phi\in C_0^\infty(\Omega),
  \]
  where $f\in L^1(\Omega)$ and $\Omega = \{x\in \mathbb R^n: |x| < 1\}$.
  Then 
  \[
  w(x) = -\int_{\Omega}K(x-y)\Delta w(y)\dd y, \quad x\in\Omega.
  \]
\end{lemma}

\begin{proof}
  Denote 
  \[
  h(x) = \int_\Omega \nabla K(x-y) \cdot\nabla w(y)\dd y,\quad x\in\Omega.
  \]
  Then $h\in L^{p}(\Omega)$, $p\in[1,n/(n-2))$.
  It follows that $h$ is almost everywhere finite.
  Let $x$ be a Lebesgue point of $w$.
\end{proof}

\section{可测函数}

\begin{proposition}\label{prop: uniform continuity of integrable function}
  If $f\in L^1(\mathbb R^n)$, then 
  \[
  \lim_{\varepsilon\searrow0}\sup_{|y|<\varepsilon}\|f(x+y)-f(x)\|_{L^1(\mathbb R^n)} = 0
  \]
  holds.
\end{proposition}

\begin{proof}
  Let $g\in C^\infty_0(\mathbb R^n)$. 
  By triangle inequality,
  \begin{align*}
		\|f(x+y)-f(x)\|_{L^1(\mathbb R^n)} 
		\leq \|f(x+y)-g(x+y)\|_{L^1(\mathbb R^n)} 
		+ \|g(x+y)-g(x)\|_{L^1(\mathbb R^n)}\\
		+ \|g(x)-f(x)\|_{L^1(\mathbb R^n)}.
	\end{align*}
  The first and third terms of the right side of this inequality may be made arbitrarily small 
  by choosing a sufficiently close smooth approximation, e.g. by modifier action, 
  and for fixed $g$, the middle term may be made arbitrarily small by choosing $y$ suffciently small,
  which can be made uniformly small, due to uniform continuity of $g$.
\end{proof}

\begin{example}
  Let 
  \begin{equation}
    f_{n,k}(x) = 
    \begin{cases}
      0, & x\in(-\infty, (k-2)/n],\\
      nx-k+2,& x\in((k-2)/n, (k-1)/n],\\
      1,& x\in((k-1/n), k/n],\\
      -nx+k+1, & x\in(k/n, (k+1)/n],\\
      0, & x\in((k+2)/n, \infty),
    \end{cases}
    \quad k = 1,2,\cdots,n, \quad n\geq1.
  \end{equation}
  $\{f_{n,k}\}$ is a sequence of continuous functions that converges in measure, 
  but does not converge at any point.
\end{example}

\begin{exercise}
\hfill\\
设$f(x)$是$[a,b]$上的可测函数，试证明$f'(x)$是$[a,b]$上的可测函数。



\end{exercise}


\begin{exercise}
\hfill\\
$\forall\delta>0$，$\exists E_{\delta}\subset E$使得$m(E_{\delta})<\delta$，且在$E\backslash E_{\delta}$上，$\{f_n(x)\}$一致收敛于$f(x)$。证$\{f_n(x)\}$几乎处处收敛于$f$。



\end{exercise}


\begin{exercise}
\hfill\\
证鲁津定理的逆定理：若$\forall\delta>0$，存在闭子集$F_{\delta}\subset E$，使$m(E\backslash F_{\delta})\leq\delta$，且$f(x)$在$F_{\delta}$上连续，则$f(x)$在$E$上是可测函数。



\end{exercise}


\begin{exercise}
\hfill\\
设$\{f_n(x)\}$是$E$上的可测函数列，$m(E)<\infty$。试证明$$\lim_{n\to\infty}f_n(x)=0,a.e.x\in E$$的充分必要条件是：对任意的$\varepsilon>0$有$$\lim_{n\to\infty}m(\{x\in E:\sup_{k>n}|f_k(x)|\geq\varepsilon\})=0.$$



\end{exercise}


\begin{exercise}
\hfill\\
设$\{f_n(x)\}$在$[a,b]$上依测度收敛于$f(x)$，$g(x)$是$R$上的连续函数。证明$\{g(f_n(x))\}$在$[a,b]$上依测度收敛于$g(f(x))$。



\end{exercise}



\begin{exercise}
\hfill\\
设$f(x)=f(\xi_1,\xi_2)$是$R^2$上的连续函数。$g_1(x)$，$g_2(x)$是$[a,b]$上的实值可测函数，试证明$F(x)=f(g_1(x),g_2(x))$是$[a,b]$上的可测函数。



\end{exercise}

\hfill\\
\section{Lebesgue积分}


\begin{exercise}
\hfill\\
设$f(x)$在$[a,b]$上的$\mathbb{R}$反常积分存在。证明：$f(x)$在$[a,b]$上可积的充要条件为$|f(x)|$在$[a,b]$上的$\mathbb{R}$反常积分存在。并证明此时成立$$(L)\int_{[a,b]}f(x)\mathrm{d}x=(R)\int_a^bf(x)\mathrm{d}x.$$


不妨设$x=b$为$f(x)$的瑕点。

若$|f|$在$[a,b]$上的$\mathbb{R}$反常积分存在，则$\forall n\geq1$，$|f|$在$E_n=[a,b-\frac{1}{n}]$上$\mathbb{R}$可积。因为$\{|f(x)|X_{E_n}(x)\}$是非负递增函数，且有$$\lim_{n\to\infty}|f(x)|X_{E_n}(x)=|f(x)|,x\in E.$$所以由Levi定理知：
\begin{align*}
(L)\int_E|f(x)|\mathrm{d}x&=\lim_{n\to\infty}\int_E|f(x)|X_{E_n}(x)\mathrm{d}x\\
&=\lim_{n\to\infty}\int_{E_n}|f(x)|\mathrm{d}x\\
&=(R)\int_a^b|f(x)|\mathrm{d}x\\
&\leq\infty.
\end{align*}
这就说明了$|f(x)|\in L(E).$

若$f(x)$在$E$上$\mathbb{L}$可积，则$|f(x)|$在$[a,b]$上$L$可积。
定义$E_n=[a,b_n]$，其中$b_n\leq b$且$\lim\limits_{n\to\infty}b_n=b$。
因为$\{|f(x)|X_{E_n}(x)\}$是非负递增函数，且
$$\lim_{n\to\infty}|f(x)|X_{E_n}(x)=|f(x)|,$$
所以应用Levi定理可得：
$$+\infty>(L)\int_E|f(x)|\mathrm{d}x=\lim_{n\to\infty}\int_E|f(x)|X_{E_n}(x)\mathrm{d}x.$$
另一方面$$\int_{E_n}|f(x)|\mathrm{d}x=\int_E|f(x)|X_{E_n}(x)\mathrm{d}x.$$
这就说明了$$\lim_{n\to\infty}\int_a^{b_n}|f(x)|\mathrm{d}x=\int_E|f(x)|\mathrm{d}x<\infty$$
对任意的$b_n\to b^-$恒成立，即$|f(x)|$在$[a,b]$上$\mathbb{R}$可积。
\end{exercise}



\begin{exercise}
\hfill\\
设$f$是$E$上定义的函数。如果存在可积函数列$g_n$，$h_n$使得$g_n(x)\leq f(x)\leq h_n(x)\quad a.e.$，而且
$$\lim_{n\to\infty}(h_n(x)-g_n(x))\mathrm{d}x=0,$$
则$f$在$E$上可积。


定义$$K_n(x)=f(x)-g_n(x),$$
$$F_n(x)=h_n(x)-g_n(x),$$
则
$$0\leq K_n(x)\leq F_n(x)\quad a.e.,$$
且
\begin{equation}\label{lebesgue_integral_1}
\lim_{n\to\infty}F_n(x)\mathrm{d}x=0.
\end{equation}
由(\ref{lebesgue_integral_1})可知$F_n(x)\Rightarrow0$。
于是$K_n(x)\Rightarrow0$。即$g_n(x)\Rightarrow f(x)$。
那么由依测度收敛的Lebesgue控制收敛定理知$f$在$E$上可积，且积分满足：
$$\int_Ef(x)\mathrm{d}x=\lim_{n\to\infty}\int_Eg_n(x)\mathrm{d}x.$$
\end{exercise}



\begin{exercise}
\hfill\\
设$f\in L(\mathbb{R})$，若对$\mathbb{R}$上任意连续函数$g(x)$，有$\int_{\mathbb{R}}f(x)g(x)\mathrm{d}x=0$，证明$f(x)=0,\quad a.e.x\in\mathbb{R}.$


定义
\begin{equation}
h(x)=
\begin{cases}
1,&x\in R[f(x)\geq0],\\
-1,&x\in R[f(x)<0],\\
\end{cases}
\end{equation}
则$h(x)$为$\mathbb{R}$上简单函数。因为$f\in L(\mathbb{R})$，于是$\forall\varepsilon>0$，$\exists X>0$，使得$$\int_{\mathbb{R}\backslash E_X}|f|\mathrm{d}x<\frac{\varepsilon}{4},$$
其中$E_X=\{x\in\mathbb{R}:|x|<X\}$。
对在$E_X\subset\mathbb{R}$上的有界可测函数$h(x)$，有$\forall\delta>0$，存在闭集$F\subset E_X$满足$m(E_X\backslash F)<\delta$和$\mathbb{R}$上的连续函数$g(x)$满足$g(x)=h(x),\forall x\in F$. 进一步,
$$\inf_{\mathbb{R}}g(x)=\inf_Fh(x)\geq-1,\sup_{\mathbb{R}}g(x)=\sup_Fh(x)\leq1.$$
于是
\begin{align*}
|\int_{\mathbb{R}}f(x)h(x)\mathrm{d}x|&=|(\int_{\mathbb{R}\backslash E_X}+\int_{E_X\backslash F}+\int_F)f(x)(h(x)-g(x))\mathrm{d}x|\\
&=|(\int_{E_X\backslash F}+\int_{\mathbb{R}\backslash E_x})f(x)(h(x)-g(x))\mathrm{d}x|\\
&\leq2(\int_{E\backslash F}+\int_{\mathbb{R}\backslash E_X})|f(x)|\mathrm{d}x\\
&\leq\frac{\varepsilon}{2}+2\int_{E_X\backslash F}|f(x)|\mathrm{d}x\\
\end{align*}
又因为$|f(x)|\in L(\mathbb{R})$，从而由Lebesgue积分的绝对连续性知：对上述$\varepsilon>0$，$\exists\delta>0$，只要$m(E_X\backslash F)<\delta$就有
$$\int_{E_X\backslash F}|f(x)|\mathrm{d}x<\frac{\varepsilon}{4}.$$
于是$$|\int_{\mathbb{R}}f(x)h(x)\mathrm{d}x|<\varepsilon.$$
事实上，我们有$$\int_{\mathbb{R}}|f(x)|\mathrm{d}x=\int_{\mathbb{R}}f(x)h(x)\mathrm{d}x<\varepsilon.$$
于是由$\varepsilon$的任意性，就有$\int_{\mathbb{R}}|f(x)|\mathrm{d}x=0$，即$f(x)=0,a.e.$
\end{exercise}

\begin{exercise}
设 $f,f_k(k=1,2,\cdots)$ 在 $R^n$ 上可积, 且对于任一可测集$E\subset\mathbb{R}^n$，有
$$\int_Ef_k(x)\mathrm{d}x\leq\int_Ef_{k+1}\mathrm{d}x,\quad k=1,2,\cdots,$$
$$\lim_{k\to\infty}\int_Ef_k(x)\mathrm{d}x=\int_Ef(x)\mathrm{d}x,$$
试证明$\lim_{k\to\infty}f_k(x)=f(x),a.e.x\in\mathbb{R}^n.$

\begin{proof}
首先由题意，$\forall k\geq1$,有
$$\int_Ef_k(x)\mathrm{d}x\leq\lim_{k\to\infty}f_k(x)\mathrm{d}x=\int_Ef(x)\mathrm{d}x,$$对任意可测子集$E\subset\mathbb{R}^n$恒成立。
于是必然有
\begin{equation}\label{lebesgue_intergal_2}
f_k(x)\leq f_{k+1}(x) \leq f(x)\quad a.e.x\in\mathbb{R}^n.
\end{equation}
由 \eqref{lebesgue_intergal_2} 知
\[
  \lim_{k\to\infty}\int_E|f(x)-f_k(x)|\mathrm{d}x
  = \lim_{k\to\infty} \int_E(f(x)-f_k(x))\mathrm{d}x = 0,
\]
应用Fatou引理,
\[
0\geq\int_E\liminf_{k\to\infty}f(x)-f_k(x)\mathrm{d}x=\int_Ef(x)\mathrm{d}x-\int_E\limsup_{k\to\infty}f_k(x)\mathrm{d}x,
\]
即 
\[
\int_Ef(x)\mathrm{d}x
\leq\int_E\limsup_{k\to\infty}f_k(x)\mathrm{d}x
= \int_E\lim_{k\to\infty}f_k(x)\mathrm{d}x
\leq\int_Ef(x)\mathrm{d}x.
\] 
完成了证明.
\end{proof}
\end{exercise}

\begin{exercise}
\hfill\\
设$f(x)$，$g(x)$是$E$上非负可测函数且$f(x)g(x)$在$E$上可积。令$Ey=E[g\geq y]$。证明：$$F(y)=\int_{E_y}f(x)\mathrm{d}x$$对一切$y>0$都存在，且成立
$$\int_0^{\infty}F(y)\mathrm{d}y=\int_Ef(x)g(x)\mathrm{d}x.$$

$E_y$可测是显然的。$$F(y)=\int_Ef(x)X_{E_y}\mathrm{d}x,$$
而$|f(x)X_{E_y}|\leq|f(x)|$，故由$f(x)$的可积性知$f(x)X_{E_y}\in L(E),\forall y>0.$
考虑到$g(x)=\int_0^{\infty}X_{E_y}\mathrm{d}y$，于是
\begin{align*}
\int_Ef(x)g(x)\mathrm{d}x&=\int_Ef(x)\int_0^{\infty}X_{E_y}\mathrm{d}y\mathrm{d}x\\
&=\int_E\int_0^{\infty}f(x)X_{E_y}\mathrm{d}y\mathrm{d}x\\
&=\int_0^{\infty}\int_Ef(x)X_{E_y}\mathrm{d}x\mathrm{d}y\\
&=\int_0^{\infty}F(y)\mathrm{d}y.\\
\end{align*}

\end{exercise}


\begin{exercise}
若$f$在$R$上可积，证明$\int_R|f(x+h)-f(x)|\mathrm{d}x\to0,h\to0$.
\end{exercise}

\begin{proof}
首先注意到$0\leq|f(x+h)-f(x)|\leq|f(x+h)|+|f(x)|$，所以由$f\in L(R)$可知$f(x+h)\in L(R),\forall h\in R$，从而$|f(x+h)-f(x)|\in L(R).$于是对任给的$\varepsilon>0$，存在$X>0$使得$$\int_{|x|>X}|f(x+h)-f(x)|\mathrm{d}x<\frac{\varepsilon}{2}.$$

其次，$|f(x+h)-f(x)|$在$[-X-1,X+1]$上可积，由鲁津定理，对任意的$\delta>0$，存在闭集$E\subset[-X,X]$且$m([-X,X]\backslash E)<\delta$，有$f(x)$在$E$上连续。从而$f$在$E$上一致连续，即对上述$\varepsilon>0$，存在$\tau>0$，只要$|h|<\tau$，就有
$$|f(x+h)-f(x)|<\frac{\varepsilon}{8X}.$$
另一方面，由Lebesgue积分的绝对连续性，对上述的$\varepsilon>0$，存在$\delta>0$，只要可测集$F$的测度$m(F)<\delta$，就有
$$\int_{F}|f(x)|\mathrm{d}x<\frac{\varepsilon}{8}.$$
于是$$\int_{F}|f(x+h)-f(x)|\mathrm{d}x<\int_{F}(|f(x)|+|f(x+h)|)\mathrm{d}x\leq\frac{\varepsilon}{4}.$$

综合即有，对任给的$\varepsilon>0$，存在$\tau>0$，使得只要$|h|<\tau$，就有
\begin{align*}
\int_R|f(x+h)-f(x)|\mathrm{d}x&\leq\frac{\varepsilon}{2}+\int_{[-X,X]}|f(x+h)-f(x)|\mathrm{d}x\\
&=\frac{\varepsilon}{2}+\int_{[-X,X]\backslash E}|f(x+h)-f(x)|\mathrm{d}x+\int_E|f(x+h)-f(x)|\mathrm{d}x\\
&<\frac{\varepsilon}{2}+\frac{\varepsilon}{4}+2X*\frac{\varepsilon}{2X}\\
&=\varepsilon.
\end{align*}
\end{proof}




\begin{exercise}
\hfill\\



\end{exercise}



\begin{exercise}
\hfill\\



\end{exercise}



\begin{exercise}
\hfill\\



\end{exercise}


